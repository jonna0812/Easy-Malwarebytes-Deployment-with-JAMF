# Easy-Malwarebytes-Deployment-with-JAMF
Provide step-by-step guidance to easily deploy Malwarebytes with JAMF

### Known Issue
- Malwarebytes Enterprise version do not have a clear instruction for JAMF deployment, but only provide a generic instruction via JAMF link:
https://docs.jamf.com/10.5.0/jamf-pro/administrator-guide/Installing_Packages.html
- In JAMF Nation, there is one instruction, but no longer working with the latest version of Malwarebytes:
https://community.jamf.com/t5/jamf-pro/deploying-malwarebytes-endpoint-agent/m-p/227958

### Goal for the deployment
- Deploy Malwarebytes Enterprise Endpoint to each enrolled device via JAMF CDN
- The app should be automatically downloaded and silently installed on endpoint device
- The endpoint device should be automatically assigned to the targeted Group in Malwarebytes Nebula console

### Instruction
1. Go to Malwarebytes Nebula onsole -> Downloads -> Find Mac version then click "Download"
2. Create a folder on your MacOS like showing below:
>/Users/local/Malwarebytes
3. Copy and paste the downloaded file to Malwarebytes folder
4. Open Jamf Composer, then drag the downloaded file (Setup.MBEndpointAgent__XXXXXXXXX-XXXX-XXXX-XXXXXXXXXXXX___.pkg) to the "SOURCES" column in the Composer.
5. Click the file name (Suggest you name it "Malwarebytes"), and open each level of the directory, then set each folder and the file permission as below:
> Owner: root (0)

> Group: owner (10)

> Mode: 777

6. Select the file from SOURCES column again and then click "Build as PKG"
7. Go to Jamf Pro console -> Click "Setting" -> Computer Management" -> "Packages" -> Click "+ New"
8. Please configure the pkg informaiton similar to below:
> Display Name: Malwarebytes

> Category: (if you have a category defined, you can choose it)

> Filename: (this is optional, if you do choose the file, then it will change the Display Name to the file name, like malwarebytes.pkg)

> Manifest File: (Choose the file and then select "Upload")

> Click "Save"

9. In Jamf console, go to "Computers" -> "Policies" -> Click "+ New"
10. Under "Options", select "General", and configure as below:

>Display Name: (you can create one, for example: "Malwarebytes Installation")

> Category: (if you have a category defined, you can choose it, for example: Computer setup)

> Under "Trigger", please select "Login" and "Recurring Check-in"

> Then click "Packages"

10. Click "Configure" in the pop-up message, and then select the file we just uploaded to "Packages", in this case, select "Malwarebytes.pkg"
11. On left, select "Files and Processes", then under "Execute Command", type below script:

> launchctl setenv MALWAREBYTES_GROUP XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX ; /usr/sbin/installer -pkg /Users/local/Malwarebytes/Setup.MBEndpointAgent__XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX___.pkg -target /

> You can find the Group ID in Nebula console -> Download -> Top-right find "Specify group assignment" -> Find it under "MacOS installer usage"

11. Select "Scope" tab, then choose the "Target Computers" and "Target Users", if you need to deploy to the entire organization, please select "All Computers" and "All Users"

12. Click "Save" in the lower-right corner.

### Key Takeaway
- Malwarebytes do not have specific instruction for JAMF Deployment
- Regular deployment via package **WILL NOT** assign the computer to specific group
